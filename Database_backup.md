# Домашнее задание к занятию «Резервное копирование баз данных»

## Выполнил Савицкий Андрей

### Задание 1 с ответами. Резервное копирование

#### Кейс
Финансовая компания решила увеличить надёжность работы баз данных и их резервного копирования. 

Необходимо описать, какие варианты резервного копирования подходят в случаях: 

- 1.1. Необходимо восстанавливать данные в полном объёме за предыдущий день.
###### Можно использовать полные резервные копии БД - 
 создание полной копии всех данных базы за предыдущий день (особено подойдет если БД небольшие по объему данных);
###### А лучше использовать инкрементальные резервные копии БД - 
 в данном случае мы имеем четкий график восстановления бэкапов (заранее известное количество точек восстановления) создается полная копия БД в начале каждого дня, а затем создаются инкрементальные резервные копии, содержащие только изменения, произошедшие с момента предыдущей полной копии. Таким образом мы не загружаем систему полным копированием, экономим место на диске и повышаем скорость копирования. 
- 1.2. Необходимо восстанавливать данные за час до предполагаемой поломки.
###### Здесь подойдет дифференциальное копирование - 
 так как в данной ситуации скорость создания является решающим критерием выбора, то небольшой объем резервной копии и высокая скорость создания дифференциального копирования выручит нас. 

---

### Задание 2. PostgreSQL

2.1. С помощью официальной документации приведите пример команды резервирования данных и восстановления БД (pgdump/pgrestore).

#### Ответ:
В PostgreSQL есть встроенный инструмент для создания резервных копий — утилита pg_dump. 
- Пример создания:
````
pg_dump dbname > filename
pg_dump mydatabase > mydatabase_backup.sql
````
Также в PostgreSQL есть утилита восстановления базы данных - pg_restore. 
- Пример восстановления:
````
pg_restore -d dbname filename.dump
pg_restore -d mydatabase mydatabase_backup.sql
````

---

### Задание 3. MySQL

3.1. С помощью официальной документации приведите пример команды инкрементного резервного копирования базы данных MySQL. 

#### Ответ:
Для создания резервной копии - 
````
mysqldump -u [username] –p[password] [database_name] > [dump_file.sql]
```` 
Для восстановления БД - 
````
mysqlimport -u root -p rsyslog < rsyslog.sql
````
Для инкрементного бэкапа - 
````
xtrabackup --backup --target-dir=/root/backupdb/inc1 --incremental-basedir=/root/backupdb/full
````

